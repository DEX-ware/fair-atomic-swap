\documentclass[sigconf, natbib=false]{acmart}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08emT\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\usepackage{datetime2}
\usepackage[normalem]{ulem}
\usepackage{multirow}
\usepackage{amsmath}

\usepackage[style=ACM-Reference-Format,backend=bibtex,sorting=none]{biblatex}
\addbibresource{./refs.bib}

\usepackage{caption}
\usepackage{subcaption}
\usepackage{graphicx}
\graphicspath{{./figs/}}

\usepackage{listings, xcolor}

\pagestyle{plain}

\renewcommand\_{\textunderscore\allowbreak}

\newcommand{\JS}[1]{{\color{blue} [JS] #1}}
\newcommand{\RC}[1]{{\color{gray} [RC] #1}}
\newcommand{\HY}[1]{{\color{orange} [HY] #1}}

% todo
\newcommand{\TODO}[1]{{\color{red} [TODO] #1}}

% modify
\newcommand{\MOD}[1]{{\color{purple} #1}}


\begin{document}
\title{
    On the optionality and \MOD{the} fairness of Atomic Swaps \\
    {\normalsize \normalfont version updated at \DTMnow }
}

\begin{abstract}
Atomic Swap enables two parties to atomically exchange their own cryptocurrencies without trusted third parties.
However, no evidence shows that the Atomic Swap protocol is fair for both the swap initiator and the swap participant.

In this paper, we investigate the fairness of the Atomic Swap protocol.
% In particular,
% \textbf{1)} we prove that an Atomic Swap is equivalent to an American Call Option without the premium, so it is unfair to the swap participant;
% \textbf{2)} we evaluate how unfair the Atomic Swap is to the swap participant, and show that Atomic Swaps with cryptocurrencies are much more unfair than with conventional financial assets (stocks and fiat currencies);
% \textbf{3)} we propose two fair Atomic Swap protocols based on the original protocol, and describe how to implement our proposed protocols on blockchains supporting scripts and smart contracts. 

First, we model the Atomic Swap as the American Call Option,
and prove that an Atomic Swap is equivalent to an American Call Option without the premium.
Thus, the Atomic Swap is unfair to the swap participant.

Second, we evaluate the unfairness of the Atomic Swap and compare their unfairness with conventional financial assets (stocks and fiat currencies).
Our evaluation consists of two parts, namely quantifying the unfairness and estimating the premium.
The unfairness quantification shows that the Atomic Swaps are much more unfair on cryptocurrencies than on stocks and fiat currencies in the same setting.
To estimate the premium, we use the conventional Cox-Ross-Rubinstein option pricing model, and the results show that the premium for cryptocurrencies is 2\% ~ 3\% of the asset value, while the premium for stocks and fiat currencies is negligible.

Third, we propose two fair Atomic Swap protocols,
one is for currency exchange and the other is for American Call Options.
Our protocols are based on the original Atomic Swap protocol, but implement the premium mechanism.
Blockchains supporting smart contracts such as Ethereum support our protocols directly.
Blockchains only supporting scripts such as Bitcoin can support our protocols by adding a simple opcode.
\end{abstract}

\keywords{Blockchain; Atomic Swap; Cross-Chain Transactions; American Call Option}

\maketitle

\input{solidity-highlighting.tex}

\input{sections/1introduction.tex}
\input{sections/2background.tex}
\input{sections/3formalization.tex}
\input{sections/4evaluation.tex}
\input{sections/5fairer-atomic-swaps.tex}
\input{sections/6implementation.tex}
\input{sections/7discussion.tex}
\input{sections/8related-work.tex}
\input{sections/9conclusion.tex}

% \begin{acks}
% TODO
% \end{acks}

\printbibliography

\input{sections/999appendix.tex}

\end{document}
