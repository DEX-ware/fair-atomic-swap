\documentclass[sigconf, natbib=false]{acmart}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08emT\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\usepackage{datetime2}
\usepackage[normalem]{ulem}
\usepackage{multirow}
\usepackage{amsmath}

\usepackage[style=ACM-Reference-Format,backend=bibtex,sorting=none]{biblatex}
\addbibresource{./refs.bib}

\usepackage{caption}
\usepackage{subcaption}
\usepackage{graphicx}
\graphicspath{{./figs/}}

\usepackage{listings, xcolor}

\usepackage[subtle, paragraphs=normal]{savetrees}

\usepackage{tikz}
\usetikzlibrary{matrix}


\pagestyle{plain}

\renewcommand\_{\textunderscore\allowbreak}

\newcommand{\JS}[1]{{\color{blue} [JS] #1}}
\newcommand{\RC}[1]{{\color{gray} [RC] #1}}
\newcommand{\HY}[1]{{\color{orange} [HY] #1}}

% todo
\newcommand{\TODO}[1]{{\color{red} [TODO] #1}}

% modify
\newcommand{\MOD}[1]{{\color{purple} #1}}

% rm all copyright stuff
% \settopmatter{printacmref=false}
% \setcopyright{none}
% \renewcommand\footnotetextcopyrightpermission[1]{}
% \pagestyle{plain}

\begin{document}
\title{On the optionality and fairness of Atomic Swaps}

\author{Runchao Han}
\affiliation{%
  \institution{Monash University and CSIRO-Data61}
}
\email{runchao.han@monash.edu}

\author{Haoyu Lin}
\affiliation{%
  \institution{}
}
\email{chris.haoyul@gmail.com}

\author{Jiangshan Yu}
\affiliation{
  \institution{Monash University}
}
\email{jiangshan.yu@monash.edu}

\begin{abstract}
Atomic Swap enables two parties to atomically exchange their own cryptocurrencies without trusted third parties.
% work
This paper provides the first quantitative analysis on the fairness of
the Atomic Swap protocol, and proposes the first fair Atomic Swap
protocol with implementations.

% 1
In particular, we model the Atomic Swap as the American Call Option,
and prove that an Atomic Swap is equivalent to an American Call Option
without the premium. Thus, the Atomic Swap is unfair to the swap
participant.  Then, we quantify the fairness of the Atomic Swap and
compare it with that of conventional financial assets (stocks and fiat
currencies).  The quantification results show that the the Atomic Swap
is much more unfair on cryptocurrencies than on stocks and fiat
currencies in the same setting.
% 2
Moreover, we use the conventional Cox-Ross-Rubinstein option pricing model in Finance to estimate the premium, and show that the estimated premium for cryptocurrencies is $2\% \sim 3\%$ of the asset value, while the premium for stocks and fiat currencies is approximately $0.3\%$.
% 3
Furthermore, we propose two fair Atomic Swap protocols, one is for
currency exchange and the other is for American Call Options. Our
protocols are based on the original Atomic Swap protocol, but
implement the premium mechanism.  Blockchains supporting smart
contracts such as Ethereum support our protocols directly.
Blockchains only supporting scripts such as Bitcoin can support our
protocols by adding a simple opcode.  Finally, we provide the
reference implementation of our protocols in Solidity, and give
detailed instructions on implementing our protocols with Bitcoin
script.
\end{abstract}

\keywords{Blockchain; Atomic Swap; Cross-Chain Transactions; American Call Option}

\maketitle

\input{solidity-highlighting.tex}

\input{sections/1introduction.tex}
\input{sections/2background.tex}
\input{sections/3formalization.tex}
\input{sections/4evaluation.tex}
\input{sections/5fairer-atomic-swaps.tex}
\input{sections/6implementation.tex}
\input{sections/7discussion.tex}
\input{sections/8related-work.tex}
\input{sections/9conclusion.tex}

\begin{acks}
We thank Sungying Chen and Xin Lin for providing their knowledge on option pricing models in finance.
We thank ZmnSCPxj for the discussion on implementing our protocol on Bitcoin.
We also thank anonymous reviewers for their constructive feedback.
\end{acks}

\printbibliography

\input{sections/999appendix.tex}

\end{document}
