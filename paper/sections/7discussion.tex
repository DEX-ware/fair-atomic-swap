\section{Discussion}
\label{sec:discussion}

\TODO{may rewrite}

\subsection{Security of Atomic Swaps}

Although already widely adopted, Atomic Swap has some security issues.

% rely on blockchain security
First, the security of Atomic Swaps relies on the security of blockchains:
If the blockchains involved in the swaps are insecure, the Atomic Swaps are also insecure.

% smart contract /script
Second, the Atomic Swap contracts are written in high-level languages, so the compiled contracts can be insecure if the contract compilers are flawed.

% 2 blockchain async
Third, the timelock is unreliable in the cross-chain scenario, because the times in different blockchains are never synchronized.
% timestamp of blockchain
Blockchains timestamp events by either two approaches: Using the block height or using the UNIX timestamp.
% relative time
The block height can serialize events on a blockchain by time, but cannot serialize events outside the blockchain.
In addition, the new block generation is a random process, so the block height cannot indicate the precise time in reality.
% abosolute time
Using the UNIX timestamp doesn't work, too.
This is because the consensus participants are responsible for timestamping events, and the consensus participants can be unreliable: They may use the wrong time, either by purpose or by accident.


\subsection{Other countermeasures to address the Atomic Swaps unfairness}

Besides our proposal, there are some other countermeasures to address the Atomic Swap unfairness.
Unfortunately, to our knowledge, all of them either have security flaws or significantly reduce the usability of Atomic Swaps.

The first countermeasure is to make Atomic Swap costly by charging setting up HTLCs, or increasing the transaction fee of HTLCs.
However, these two solutions do not only significantly reduce the usability of Atomic Swaps, but also affect HTLCs not aiming at setting up Atomic Swaps.

The second solution is to use shorter timelock for Atomic Swaps.
Unfortunately, short timelocks may cause unexpected situations.
Confirming transactions for setting up Atomic Swaps take time, and the needed time is highly random.
With short timelocks, the transactions for setting up Atomic Swaps may be confirmed after the expiration of timelocks.


\subsection{Limitations of our solutions}

Still, our solutions are not perfect.
The initiators of Atomic Swaps should have some participant's asset to initiate an Atomic Swap,
for either collateralizing successful swaps or paying for the option itself.
Unfortunately, the initiators do not always have participant's asset: They may just hope to get some participant's asset with only his asset.
Before doing an Atomic Swap, the initiator should get some participant's asset by arbitrary means.
For example, he can buy some participant's asset from cryptocurrency exchanges, or initiate a smaller Atomic Swap with shorter timelocks and no premium.