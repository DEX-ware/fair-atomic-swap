\section{Discussion}
\label{sec:discussion}

\TODO{may rewrite}

\subsection{Security of Atomic Cross-Chain Swaps}

Atomic Cross-Chain Swaps are not perfect, and have some security issues.

% rely on blockchain security
First, the security of Atomic Cross-Chain Swaps relies on the security of blockchains:
If the blockchains involved in the swaps are insecure, the Atomic Cross-Chain Swaps are also insecure.

% smart contract /script
Second, the Atomic Cross-Chain Swap contracts are written by high-level languages.
This means the compiled contracts can be insecure if the contract compilers are flawed.

% 2 blockchain async
Furthermore, the timing mechanism may not be reliable, while the Atomic Swaps are based on timelocks.
% timestamp of blockchain
In blockchains, events are timestamped by either two approaches: The relative time or the absolute time.
% relative time
The relative time uses the block height to represent the time.
A block height cannot represent a precise time, as the new block generation is a random process.
% abosolute time
The absolute time uses the UNIX timestamp, and the consensus participants are responsible for timestamping blocks.
However, the consensus participants may use the wrong time, either by purpose or by accident.
% async blockhains
Furthermore, blockchains are independent to each other, which means they are asynchronous in terms of time.
This can lead to the inconsistency on the timelocks of $Coin_1$ and $Coin_2$.


\subsection{Other Countermeasures for the Unfair Atomic Cross-Chain Swaps}

Besides our solutions, there are some other countermeasures to address the Atomic Swap unfairness.
However, all of them significantly reduce the usability of Atomic Swaps.

The first countermeasure is to make setting up HTLCs non-free \HY{"chargeable"}, or increase the transaction fee of HTLCs.
However, these two solutions affect all HTLCs, but not all HTLCs are set for Atomic Swaps.
The second solution is to use shorter timelock for Atomic Swaps.
Unfortunately, as the time of confirming a transaction is highly random,
short timelocks may cause unexpected situations.
For example, the new block arrives too late, but the timelock of $Coin_1$ has already expired.

\subsection{Limitations of Our Solutions}

Still, our solutions are not perfect.

The biggest limitation is that initiators of Atomic Swaps should have some $Coin_2$ to initiate an Atomic Swap,
for either the pledge of successful swaps or paying for the option.
However, the initiators do not always have $Coin_2$: They may just hope to get some $Coin_2$ by some $Coin_1$.
To mitigate this problem, an initiator should get some $Coin_2$ before doing an Atomic Cross-Chain Swap by arbitrary means.
First, he can buy some $Coin_2$ from cryptocurrency exchanges.
Second, he can initiate a smaller Atomic Swap with shorter timelocks and no premium.

Another limitation is that our Atomic Swap protocols are still not ``Atomic''.
For a perfectly Atomic Swap protocol, both parties should have equivalent money at any time slot.
However, our protocols and the original Atomic Swap protocol fail to meet this requirement - redeeming does not happen simultaneously. 